digraph component_architecture {
  label="component architecture";
  compound=true;
  concentrate=true;
  rankdir="RL";
  newrank="true";
  
  node [shape="component"];
  node [colorscheme="pastel15"];
  
    {
        // package 'application'
        node [fillcolor="1", style="filled"];
        
        subgraph cluster_app {
            label = "application";
            rank="same";
            style="bold";
            application [shape=point style=invis];
        
            output_boundaries [label="«interface»\n output boundaries"]
            use_cases [label="use case interactors"]
            input_boundaries [label="«interface»\n input boundaries"]
        }
    }
    
    {
        // package 'enterprise business rules'
        node [fillcolor="2", style="filled"];
        
        subgraph cluster_ebr {
            label = "enterprise business rules";
            rank="same";
            style="bold";
            enterprise_business_rules [shape=point style=invis];
            
            entities;
        }
    }
  
    {
        // package 'frameworks and libraries'
        node [fillcolor="3", style="filled, dotted"];
        
        subgraph cluster_thirdparty {
            label = "frameworks and libraries";
            rank="same";
            style="bold,dotted";
            thirdparty[shape=point style=invis];
           
        sdk [label="software development kit"]
        drivers [label="drivers"];
        views;
        }
    }
  
    {
        // package 'interface adapters'
        node [fillcolor="4", style="filled"];
        
        subgraph cluster_ia {
            label = "interface adapters";
            rank="same";
            style="bold";
            interface_adapters [shape=point style=invis];
        
            controllers, presenters;
            view_models [label="view models"];
            drivers_adapters [label="drivers adapters"];
            board_interfaces [label="board interfaces"];
        };
    }
  
    {
        // package 'board adapter'
        node [fillcolor="5", style="filled"];
        
        subgraph cluster_board {
            label = "board adapter";
            rank="same";
            style="bold";
            board [shape=point style=invis];
        
            driver_interface [label="drivers interfaces"]
            board_impl [label="board implementatnion"]
        }
    }

    n1 [label="Not part of\nthe project.", shape="note"]
    n1 -> thirdparty [lhead="cluster_thirdparty"];
  
    {
        // associations
        edge [style="dashed"];
        {
            // dependencies
            edge [arrowhead="vee"];
            use_cases -> entities [constraint="true"];
            use_cases -> output_boundaries;
            presenters -> board_interfaces;
            presenters -> view_models;
            presenters -> views;
            controllers -> input_boundaries;
            controllers -> board_interfaces;
            board_impl -> driver_interface;
            views -> view_models;
            drivers_adapters -> drivers;
        }
        {
            // realizations
            edge [arrowhead="onormal"];
            use_cases -> input_boundaries;
            presenters -> output_boundaries;
            board_impl -> board_interfaces;
            drivers_adapters -> driver_interface;
        }
    }
    {
        rank="same";
        interface_adapters, thirdparty, board;
    }
    
}

