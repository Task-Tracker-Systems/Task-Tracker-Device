digraph component_architecture {
  compound=true;
  rankdir="BT";
  style="bold"
  
  node [shape="component"];
  node [colorscheme="pastel16"];
  
    {
        // package 'application'
        node [fillcolor="1", style="filled"];
        
        subgraph cluster_app {
            label = "application";
        
            output_boundaries [label="«interface»\n output boundaries"]
            use_cases [label="use case interactors"]
            input_boundaries [label="«interface»\n input boundaries"]
            view_models [label="view models"];
        }
    }
    
    {
        // package 'enterprise business rules'
        node [fillcolor="2", style="filled"];
        
        subgraph cluster_ebr {
            label = "enterprise business rules";
            entities;
        }
    }
  
    {
        // package 'frameworks and libraries'
        node [fillcolor="3", style="filled, dashed"];
        
        subgraph cluster_thirdparty {
            label = "frameworks and libraries";
            style="bold,dashed";
            thirdparty[shape=point style=invis];
           
            sdk [label="software development kit"]
            drivers [label="drivers"];
            views;
        }
    }
    
    subgraph clusterX_margin
    {
        style=invis
        margin="20.0,0.0"
        n1 [label="Not part of\nthe project.", shape="note"]
        n1 -> thirdparty [lhead="cluster_thirdparty"];
    }
  
    {
        // package 'interface adapters'
        node [fillcolor="4", style="filled"];
        
        subgraph cluster_ia {
            label = "interface adapters";
        
            controllers, presenters;
            board_interfaces [label="«interface»\n board interfaces"];
        };
    }
  
    {
        // package 'board adapter'
        node [fillcolor="5", style="filled"];
        
        subgraph cluster_board {
            label = "board adapter";
        
            driver_interface [label="«interface»\n drivers interfaces"]
            board_impl [label="board implementation"]
        }
    }
  
    {
        // package 'interface adapters'
        node [fillcolor="6", style="filled"];
        
        subgraph cluster_drivers_adapters {
            label = "drivers";
            drivers_adapters [label="drivers adapters"];
        
        };
    }

  
    {
        // associations
        edge [style="dashed"];
        {
            // dependencies
            edge [arrowhead="vee"];
            use_cases -> entities;
            use_cases -> output_boundaries;
            presenters -> board_interfaces;
            presenters -> view_models;
            presenters -> views;
            controllers -> input_boundaries;
            controllers -> board_interfaces;
            board_impl -> driver_interface;
            views -> view_models;
            drivers_adapters -> drivers;
            {views, drivers, drivers_adapters} -> sdk;
        }
        {
            // realizations
            edge [arrowhead="onormal"];
            use_cases -> input_boundaries;
            presenters -> output_boundaries;
            board_impl -> board_interfaces;
            drivers_adapters -> driver_interface;
        }
    }
}

